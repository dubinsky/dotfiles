= Notes on dotfiles in general and Omarchy-specific tweaks
:toc:
:toclevels: 4
:toc: preamble
:icons: font

My notes on dotfiles in general and tweaks specific to https://omarchy.org/[Omarchy].

== dotfiles

=== Motivation

Around year 2000, I heard, saw, and - I vaguely recall - used myself
a bare repository approach to store my configuration files.
Since I change my desktop computer only every 6-7 years on the average,
it did not make sense to formalize it.

Now that I use https://dub.podval.org/notes/SystemAdministration/Omarchy.html[Omarchy]
on both my https://dub.podval.org/notes/SystemAdministration/Desktop/Framework%20Laptop%2013.html[Framework laptop]
and https://dub.podval.org/notes/SystemAdministration/Desktop/Desktop%202024.html[Desktop 2024],
maybe it is time to try again ;)

=== Approach

The options I see are:

- https://www.gnu.org/software/stow/[GNU stow]:
although recommended in the Omarchy Manual,
its symlink-based approach does not appeal to me;
- bare GIT repository:
there are many https://www.atlassian.com/git/tutorials/dotfiles[guides],
but I'd like something that helps with creating and maintaining the dotfiles repository;
- https://yadm.io/[yadm] seems to be a thin enough wrapper around a GIT repository
which does help with routine tasks;
- https://www.chezmoi.io/[chezmoi] gets a lot of praise for better templating than `yadm`,
but since I don't even understand what templating is, let alone need it,
I am going to go with `yadm` for now :)

`yadm` arranges for the home directory to be the work tree of the dotfiles repository
which it stores in `~/.local/share/yadm/repo.git`.

== yadm

=== Installation

To install `yadm` on `Omarchy`:

[source,shell]
----
$ sudo pacman -S yadm
----

=== bootstrap

After checkout, `yadm` https://yadm.io/docs/bootstrap[runs]
`~/.config/yadm/bootstrap` executable;
it can also be run explicitly: `yadm bootstrap`.
I use a https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap[script] copied from the `yadm` manual
which runs all the executables in `~/.config/yadm/bootstrap.d/`.

=== README

There are https://github.com/yadm-dev/yadm/issues/93[ways] to add README
to the `yadm` repository without polluting the home directory;
I do not want to deal with `sparse checkout`, so I just put `README.adoc` under `.github` ;)

=== Secrets

If I decide to store secrets in my `dotfiles` repository
(Cloudflare API tokens, Google Cloud Platform keys etc.),
`yadm` provides https://yadm.io/docs/encryption#[its own way]
of doing that, but there are approaches that are not `yadm`-specific:

- https://github.com/AGWA/git-crypt[git-crypt]
- https://github.com/elasticdog/transcrypt[transcrypt]
- https://github.com/sobolevn/git-secret[git-secret]
- https://github.com/getsops/sops[SOPS]

`yadm` supports `transcrypt`  and `git-crypt` directly.

== Omarchy

Bootstrap, configuration, and manual tweaks to set up Omarchy.

=== Updates

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/00-updates.sh[~/.config/yadm/bootstrap.d/00-updates.sh]

=== DNS

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/dns.sh[~/.config/yadm/bootstrap.d/dns.sh]

- UseDomains drop-in: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/etc/systemd/network.conf.d/80-UseDomains.conf[~/.config/yadm/etc/systemd/network.conf.d/80-UseDomains.conf]

- /etc/hosts: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/etc/hosts[~/.config/yadm/etc/hosts]

=== Monitors

- https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/monitors.conf[~/.config/hypr/monitors.conf]

=== Fonts
- `Hyprland`: https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/looknfeel.conf[~/.config/hypr/looknfeel.conf]
- `Ghostty`:  https://github.com/dubinsky/dotfiles/tree/master/.config/ghosttty/config[~/.config/ghosttty/config`]
- `Alacritty`: https://github.com/dubinsky/dotfiles/tree/master/.config/alacritty/alacritty.toml[~/.config/alacritty/alacritty.toml]

=== Keyboards

- keyboard layouts: https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/input.conf[~/.config/hypr/input.conf]
- keyboard layout indicator: https://github.com/dubinsky/dotfiles/tree/master/.config/waybar/config.jsonc[~/.config/waybar/config.jsonc]
- keyboard layout indicator styling and font size: https://github.com/dubinsky/dotfiles/tree/master/.config/waybar/style.css[~/.config/waybar/style.css]

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/keyboards.sh[~/.config/yadm/bootstrap.d/keyboards.sh]

- udev rules: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/etc/udev/rules.d/50-zsa.rules[~/.config/yadm/etc/udev/rules.d/50-zsa.rules]

- `keymapp` on the path: https://github.com/dubinsky/dotfiles/tree/master/.bash_profile[~/.bash_profile];

- TODO add desktop entry and/or key binding for keymapp...

=== Mice

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/mice.sh[~/.config/yadm/bootstrap.d/mice.sh]

=== DirEnv

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/direnv.sh[~/.config/yadm/bootstrap.d/direnv.sh]

- hook into the shell:
https://github.com/dubinsky/dotfiles/tree/master/.bashrc[~/.bashrc];

- status in the prompt: https://github.com/dubinsky/dotfiles/tree/master/.config/starship.toml[~/.config/starship.toml];

=== SSH

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/yubikey.sh[~/.config/yadm/bootstrap.d/ssh.sh]

- `SSH` agent socket: https://github.com/dubinsky/dotfiles/tree/master/.config/uwsm/env[~/.config/uwsm/env];

- `SSH` configuration: https://github.com/dubinsky/dotfiles/tree/master/.ssh/config[~/.ssh/config];

- `SSH` authorized keys: https://github.com/dubinsky/dotfiles/tree/master/.ssh/authorized_keys[~/.ssh/authorized_keys];

=== Java

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/java.sh[~/.config/yadm/bootstrap.d/java.sh]

- https://github.com/dubinsky/dotfiles/tree/master/.gradle/gradle.properties[~/.gradle/gradle.properties]

- https://github.com/dubinsky/dotfiles/tree/master/.config/git/config[~/.config/git/config]

=== Organizations

- https://github.com/dubinsky/dotfiles/tree/master/Projects/.envrc[~/Projects/.envrc]
- https://github.com/dubinsky/dotfiles/tree/master/.gitconfig[~/.gitconfig]
- https://github.com/dubinsky/dotfiles/tree/master/.envrc[~/CognoMath/.envrc]
- https://github.com/dubinsky/dotfiles/tree/master/.gitconfig[~/CognoMath/.gitconfig]
- https://github.com/dubinsky/dotfiles/tree/master/.envrc[~/OpenTorah/.envrc]
- https://github.com/dubinsky/dotfiles/tree/master/.gitconfig[~/OpenTorah/.gitconfig]

=== JetBrains
- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/jetbrains.sh[~/.config/yadm/bootstrap.d/jetbrains.sh]

- `JetBrains Toolbox` on the path: https://github.com/dubinsky/dotfiles/tree/master/.bash_profile[~/.bash_profile]

- `IntelliJ` keyboard binding:
https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/bindings.conf[~/.config/hypr/bindings.conf]

- windows rules: https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/jetbrains.conf[~/.config/hypr/jetbrains.conf],
https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/hyprland.conf[~/.config/hypr/hyprland.conf]

- manual: enable native Wayland support:
select `Help | Edit custom VM options` and add `-Dawt.toolkit.name=WLToolkit`;
see  https://youtrack.jetbrains.com/articles/SUPPORT-A-1166/Linux-how-to-turn-on-off-native-Wayland-mode

=== Pulumi and Besom

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/pulumi.sh[~/.config/yadm/bootstrap.d/pulumi.sh]

=== Synchronization and Backup

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/syncs.sh[~/.config/yadm/bootstrap.d/syncs.sh]

=== Google Cloud

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/google-cloud.sh[~/.config/yadm/bootstrap.d/google-cloud.sh]

=== Midnight Commander

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/mc.sh[~/.config/yadm/bootstrap.d/mc.sh]
- theme, font: https://github.com/dubinsky/dotfiles/tree/master/.config/mc/ini[~/.config/mc/ini]

=== Obsidian
- manual: enable community plugins;
- manual: set theme to `Omarchy` so that Obsidian follows theme changes; this theme becomes available in an Obsidian vault only after Omarchy theme was changed at least once after Obsidian vault was opened.
- manual: to increase font size of both the user interface that the editor, set
`Settings | Appearance | Advanced | Zoom level` to 150% and
`Settings | Appearance | Font size` to 16.

=== Chromium

- ability to log into Google account and synchronize bookmarks etc.:
~/.config/chromium-flags.conf
(manual: `Omarchy | Install | Service | Chromium Account`);
- manual: TODO what theme should I use to be able to change font size?

=== BitWarden

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/bitwarden.sh[~/.config/yadm/bootstrap.d/bitwarden.sh]

- keyboard binding (replaces `1Password`):
https://github.com/dubinsky/dotfiles/tree/master/.config/hypr/bindings.conf[~/.config/hypr/bindings.conf];

=== Books

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/asciidoctor.sh[~/.config/yadm/bootstrap.d/asciidoctor.sh]

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/books.sh[~/.config/yadm/bootstrap.d/books.sh]

- syncthing: https://github.com/dubinsky/dotfiles/tree/master/.config/syncthing/config.xml[~/.config/syncthing/config.xml]

=== Health

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/health.sh[~/.config/yadm/bootstrap.d/health.sh]

- OSCAR: https://github.com/dubinsky/dotfiles/tree/master/.config/OSCAR_Team/OSCAR.conf[~/.config/OSCAR_Team/OSCAR.conf]

=== Radio

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/radio.sh[~/.config/yadm/bootstrap.d/radio.sh]

=== GPG

- bootstrap: https://github.com/dubinsky/dotfiles/tree/master/.config/yadm/bootstrap.d/gpg.sh[~/.config/yadm/bootstrap.d/gpg.sh]
